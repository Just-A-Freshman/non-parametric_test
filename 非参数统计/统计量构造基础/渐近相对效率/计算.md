## 渐进相对效率的计算
### 1、 \(T\)统计量 vs \(SG\)符号统计量
假设{\(X_j, j = 1, 2, ..., n\)}是独立同分布的样本，均服从正态分布, 即: \(X_j \sim N(\mu, \sigma^2)\)
\(H_0: \mu = 0 \leftrightarrow H_1: \mu = \mu_i, \lim\limits_{i \to \infty} \mu_i = 0\)
记\(T_n = \sqrt{n}\bar{X} / S,  \, SG_n = \sum\limits_{j = 1}^n I(X_j > 0)\), 求\(ARE(T, SG)\)

思路简述：我们要求\(T_n\)和\(SG_n\)的均值函数和方差函数，且这两个函数都要与待估参数\(\mu\)相关。具体而言，我们要得到: 
\(E_\mu(T_n)、D_\mu(T_n)、E_\mu(SG_n)和D_\mu(SG_n)\)
我们要确定哪些是随机变量，哪些是常量，哪些是自变量。
随机变量包括：\(\bar{X}, S\)，它们每次抽样都会发生变化；常量有：\(\sigma\)和\(\mu\)。特别的，\(\mu\)作为待估参数，还需要视为自变量处理。


#### 步骤一，求解\(C_{T_n} = \lim\limits_{i \to \infty}\frac{E_{\mu}^{'}(T_n) \big |_{\mu = 0}}{\sqrt{n \cdot D_{\mu}(T_n)\big |_{\mu = 0}} }\)
##### 方法一
因为\( \frac{\bar{X} - \mu}{S / \sqrt{n}} \sim t(n - 1)\), 而\(E(\frac{\bar{X} - \mu}{S / \sqrt{n}}) = 0\)

所以\( T_n = \frac{\bar{X} - \mu}{S / \sqrt{n}} + \frac{\mu}{S / \sqrt{n}}\)

\(\begin{aligned} 
 E(T_n) &= E(\frac{\bar{X} - \mu}{S / \sqrt{n}}) + E(\frac{\mu}{S / \sqrt{n}}) \\ &= 0 + E(\frac{\mu}{S / \sqrt{n}}) \\ &= \sqrt{n} \mu \cdot E(\frac{1}{S})
 \end{aligned}\)
而\(S \stackrel{P}{\rightarrow} \sigma \implies \frac{1}{S} \stackrel{P}{\rightarrow} \frac{1}{\sigma} \implies E(\frac{1}{S}) \stackrel{P}{\rightarrow} E(\frac{1}{\sigma}) = \frac{1}{\sigma}\)

所以\(E(T_n) = \frac{\sqrt{n}\mu}{\sigma}\)

\(\begin{aligned}
D(T_n) &= E(T_n^2) - [E(T_n)]^2 = E(\frac{\bar{X}^2}{S^2 / n}) - \left(\frac{\sqrt{n}\mu}{\sigma} \right)^2 \\
&= n\cdot E(\frac{\bar{X}^2}{S^2}) - \frac{n\mu^2}{\sigma^2}
 \end{aligned}
\)

在正态分布中， \(\bar{X}\)和\(S^2\)相互独立\(\implies \bar{X}^2\)和\(\frac{1}{S^2}\)之间也相互独立；同时，\(S \stackrel{P}{\rightarrow} \sigma \implies \frac{1}{S^2} \stackrel{P}{\rightarrow} \frac{1}{\sigma^2} \implies E(\frac{1}{S^2}) \stackrel{P}{\rightarrow} E(\frac{1}{\sigma^2}) = \frac{1}{\sigma^2}\)

\(
    \begin{aligned} n \cdot E(\frac{\bar{X}}{S^2}) &= n \cdot E(\bar{X}^2) \cdot E(\frac{1}{S^2}) \\ &= n \cdot (D(\bar{X}) + E(X)^2) \cdot E(\frac{1}{S^2})) 
    \\ &= n \cdot (\frac{\sigma^2}{n} + \mu^2) \cdot \frac{1}{\sigma^2} 
    \\ &= 1 + \frac{n\mu^2}{\sigma^2}
    \end{aligned}\)

因此\(D(T_n) \approx 1 + \frac{n\mu^2}{\sigma^2} - \frac{n\mu^2}{\sigma^2} = 1\)

##### 方法二
\(T_n = \frac{\sqrt{n}\bar{X}}{S} = \frac{\sqrt{n}(\bar{X} - \mu)/\sigma + \sqrt{n}\mu/\sigma}{S/\sigma}\)
因为当\(n \to \infty, \, \sqrt{n}(\bar{X} - \mu)/\sigma \sim N(0, 1), \, \)且\(S / \sigma \stackrel{P}{\rightarrow} 1\)

所以\(Tn \stackrel{.}{\sim} N(\sqrt{n}\mu/\sigma, 1) \implies E(Tn) \approx \sqrt{n}\mu/\sigma, D(T_n) \approx 1\)

##### 结果
\(E'(T_n) = \frac{\sqrt{n}}{\sigma}, \, E'(T_n) \big |_{\mu=0} = \frac{\sqrt{n}}{\sigma}\)

\(C_{T_n} = \lim\limits_{i \to \infty} \frac{\sqrt{n} / \sigma}{\sqrt{n \cdot 1}} = \frac{1}{\sigma}\)


#### 步骤二, 求解\(C_{SG_n} = \lim\limits_{i \to \infty}\frac{E_{\mu}^{'}(SG_n)\big |_{\mu = 0}}{\sqrt{n \cdot D_{\mu}(SG_n)\big |_{\mu = 0}}}\)



\(I(X_j) \sim B(1, p(\mu)) \Rightarrow SG_n \sim B(n, p(\mu))\)

 \(\begin{aligned} 
 p(\mu) &= P(X_j > 0 | \mu) = P(\frac{X_j - \mu}{\sigma} > \frac{0 - \mu}{\sigma})  \\ &= P(Z > -\frac{\mu}{\sigma}) = P(Z < \frac{\mu}{\sigma}) = \Phi(\mu/\sigma) 
 \end{aligned}\)


\(E(SG_n) = n \cdot p(\mu) = n \cdot \Phi(\mu / \sigma)\)
\(D(SG_n) = n \cdot p(\mu) \cdot (1 - p(\mu)) = n \cdot \Phi(\mu / \sigma) \cdot (1 - \Phi(\mu / \sigma))\)

因为\(\Phi(0) = \frac{1}{2}, \, \Phi^{'}(x) = p(x) = \frac{1}{\sqrt{2\pi}}e^{-\frac{x^2}{2}}\)

所以\(E'(SG_n) = n \cdot p(x) \cdot \frac{1}{\sigma} \Rightarrow E'(SG_n)\big |_{\mu = 0} = \frac{n}{\sigma} \cdot \frac{1}{\sqrt{2\pi}}\)

同时\(D(SG_n) \big |_{\mu = 0} = \frac{1}{4}n\)， 故：
\[C_{SG_n} = \lim\limits_{i \to \infty} \frac{\frac{n}{\sigma} \cdot \frac{1}{\sqrt{2\pi}}}{\sqrt{n \cdot \frac{1}{4}n}} = \frac{2}{\sigma \sqrt{2\pi}}\]


#### 步骤三，求解\(ARE(T_n, SG_n)\)

\[ARE(T_n, SG_n) = \left (\frac{C_{T_n}}{C_{SG_n}} \right)^2 = \left (\frac{1 / \sigma}{2 / \sigma \sqrt{2\pi}} \right)^2 = \frac{\pi}{2}\]




